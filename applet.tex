\section{Implementierung}\label{kap_implementierung}

Im Rahmen einer Projektarbeit im Wintersemester 2014/15 wurde der in \cite{cima_paper} beschriebenen Algorithmus in einem Java-Applet implementiert. Ziel war es, den Algorithmus visuell darzustellen und ihn anhand des Applets in einem kurzen Vortrag vorzustellen.
\\
\\
Als Bestandteil dieser Bachelorarbeit haben wir das Applet mit der in Kapitel \ref{modifizierterAlgoChapter} beschriebenen Modifikation erweitert und die beiden Algorithmen in Kapitel \ref{kap_pot} entwickelt und ebenfalls in das Applet integriert.


\subsection{Benutzung des Applets}

Im Folgenden werden wir kurz beschreiben, wie das Applet benutzt werden kann:

\subsubsection*{Den Baum erstellen und ändern}

Man kann einen Baum (bzw. einen Baumknoten) erstellen, indem man mit einem Linksklick in das leere Applet klickt. Sofort erscheint ein Wurzelknoten.\\
Mit einem Linksklick auf einen Knoten fügt man ihm einen Kindknoten hinzu. Mit einem Rechtsklick auf einen Knoten wird dieser zusammen mit dem gesamten Teilbaum gelöscht.\\
Die Kantengewichte lassen sich ebenfalls mit einem Klick verändern. Ein Linksklick erhöht das entsprechende Kantengewicht um 1, ein Rechtsklick reduziert das Kantengewicht um 1. Allerdings können die Kantengewichte nicht kleiner als 1 werden.


\subsubsection*{Verwendung des Applets}

Nachdem man einen Baum erstellt hat, gibt es mehrere Funktionen, die man auswählen kann:\\

\begin{itemize}
	\item Man kann die Nachrichtenberechnung sowohl von dem ursprünglichen Algorithmus (Kapitel \ref{kap_algorithmus}), als auch von der Modifikation (Kapitel \ref{modifizierterAlgoChapter}) animieren lassen oder sofort das Ergebnis anzeigen. Bei der Animation wird immer angezeigt, wie jede einzelne Nachricht zustande kommt. Dies wird in Kurzform als Text und durch Färbung der einzelnen Elemente des Baumes verdeutlicht. Nachdem alle Nachrichten verschickt wurden, berechnet jeder Knoten, wie viele Agenten benötigt werden, um den gesamten Baum von diesen Knoten aus zu dekontaminieren. Dieser Wert wird am Ende in jedem Knoten angezeigt. Nach Abschluss des Algorithmus wird einer der Knoten mit minimaler Agentenzahl ausgewählt und als Homebase markiert.
	
	\item Alternativ zur Nachrichtenberechnung kann man sich die beiden Algorithmen aus Kapitel \ref{kap_pot} visuell darstellen lassen. Dazu werden ebenfalls die Nachrichten einzeln animiert (oder das Ergebnis sofort angezeigt), allerdings zeigen die Informationen (Text und Einfärbung), wie in jedem einzelnen Schritt die erweiterte Nachricht berechnet wird, die in dem jeweiligen Algorithmus benutzt wird. Man muss beachten, dass die Potentialberechnung nur mit der modifizierten Variante des Algorithmus ausführbar ist. Am Ende dieses Algorithmus wird angezeigt, wie viele Agenten jeder Knoten zu Dekontamination benötigt, welcher Knoten die Homebase ist, und, falls möglich, welche Kante reduziert werden sollte, um die Agentenzahl möglichst weit zu reduzieren.
	
	\item Außerdem lässt sich im Applet animieren, wie nach erfolgreicher Nachrichtenberechnung die Dekontamination des Baumes funktioniert. Die Strategie der Agenten ist dabei monoton. Dies bedeutet, dass jeder Knoten, der schon einmal dekontaminiert wurde, nicht mehr kontaminiert werden kann, da an den entsprechenden Stellen im Baum Wachen aufgestellt werden. Sind alle Knoten dekontaminiert, ist der Algorithmus abgeschlossen.
\end{itemize}

Alle Animationen können entweder als Ganzes abgespielt oder in einer Step-by-step-Animation in Teilen durchgeführt werden. \\
Alle Optionen, die im Applet verfügbar sind, werden eingeblendet. Alle in dem Moment nicht verfügbaren Optionen werden ausgeblendet, um eine bessere Übersicht zu gewährleisten.


\subsection{Beispiel aus dem Applet}


\begin{figure}[hb]
	\includegraphics[width=0.8\textwidth]{bilder/abb_erklaerung1.png} 
	\captionsetup{width=0.8\textwidth}
	\caption{Ganz tolles beispiel}
	\label{abb_erklaerung1}
\end{figure}
\begin{figure}[hb]
	\includegraphics[width=0.8\textwidth]{bilder/abb_erklaerung2.png} 
	\captionsetup{width=0.8\textwidth}
	\caption{Ganz tolles beispiel}
	\label{abb_erklaerung1}
\end{figure}
\begin{figure}[hb]
	\includegraphics[width=0.8\textwidth]{bilder/abb_erklaerung3.png} 
	\captionsetup{width=0.8\textwidth}
	\caption{Ganz tolles beispiel}
	\label{abb_erklaerung1}
\end{figure}
\begin{figure}[hb]
	\includegraphics[width=0.8\textwidth]{bilder/abb_erklaerung4.png} 
	\captionsetup{width=0.8\textwidth}
	\caption{Ganz tolles beispiel}
	\label{abb_erklaerung1}
\end{figure}


\begin{figure}[h]
	\subfigure[Die Nachricht $\lambda_{y}$ (blau) von x zu y hat den Wert 5, da $edge_{1} $ und $edge_{2}$ (beide grün) die entscheidenden Kanten sind.
	\label{modifiziert_a}]{\includegraphics[width=0.65\textwidth]{bilder/abb_erklaerung1.png}}
	%	\hfill  
	%lösche die neue line und füge das \hfill wieder ein um die bilder nebeneiander zu haben
	
	\subfigure[Da das Knotengewicht durch die Kante zwischen x und y bestimmt wird (grün) und dieses größer ist als die Summe der beiden normalen Kanten $edge_{1}$ und $edge_{2}$ (gelb), bestimmt diese Kante den Wert der Nachricht $\lambda_{y} = 5$ (blau). \label{modifiziert_b}]{\includegraphics[width=0.65\textwidth]{bilder/abb_erklaerung2.png}} 
	%	\hfill
	
	\subfigure[Die größte Nachricht (grün), die an $x$ ankommt, ist größer als die bisher berechnete Nachricht, und bestimmt daher den Nachrichtenwert $\lambda_{y} = 8$ (blau). \label{modifiziert_c}]{\includegraphics[width=0.65\textwidth]{bilder/abb_erklaerung3.png}}  
	
	\subfigure[Die größte Nachricht (grün), die an $x$ ankommt, ist größer als die bisher berechnete Nachricht, und bestimmt daher den Nachrichtenwert $\lambda_{y} = 8$ (blau). \label{modifiziert_d}]{\includegraphics[width=0.65\textwidth]{bilder/abb_erklaerung4.png}}  
	
	\caption{Drei Fälle, die bei der Modifizierung des Algorithmus beachtet werden müssen, um alle Spezialfälle abzudecken.} 
	
	
	
	%%%%%%%%%%%%%%%%%%%%%%%%%
	
		\begin{figure}[H]
			\caption{My Figure}
			\begin{subfigure}{\textwidth}
				\caption{Fig 1}
				\includegraphics[width=0.65\textwidth]{bilder/abb_erklaerung1.png}
			\end{subfigure}
			\begin{subfigure}{\textwidth}
				\caption{Fig 2}
				\includegraphics[width=0.65\textwidth]{bilder/abb_erklaerung2.png}
			\end{subfigure}
		\end{figure}
		\clearpage
		\begin{figure}[H]
			\ContinuedFloat % continue from previous page
			\begin{subfigure}{\textwidth}
				\caption{Fig 3}
				\includegraphics[width=0.65\textwidth]{bilder/abb_erklaerung3.png}
			\end{subfigure}
			\begin{subfigure}{\textwidth}
				\caption{Fig 4}
				\includegraphics[width=0.65\textwidth]{bilder/abb_erklaerung4.png}
			\end{subfigure}
		\end{figure}
	
\end{figure}
